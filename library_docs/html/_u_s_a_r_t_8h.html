<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>My Project: sketchbook/libraries/USART/USART.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_57e3097d5bf8259ea406c6ee741d086f.html">sketchbook</a></li><li class="navelem"><a class="el" href="dir_1f230a50cb8328eed74ee6db218aa7d6.html">libraries</a></li><li class="navelem"><a class="el" href="dir_65ccc759a0f9c7de4dd28389ff048c56.html">USART</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USART.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for USART.h:</div>
<div class="dyncontent">
<div class="center"><img src="_u_s_a_r_t_8h__incl.png" border="0" usemap="#sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8h" alt=""/></div>
<map name="sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8h" id="sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_u_s_a_r_t_8h__dep__incl.png" border="0" usemap="#sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8hdep" alt=""/></div>
<map name="sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8hdep" id="sketchbook_2libraries_2_u_s_a_r_t_2_u_s_a_r_t_8hdep">
</map>
</div>
</div>
<p><a href="_u_s_a_r_t_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7db8915ef20a3db5378d21c74e4eee2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a7db8915ef20a3db5378d21c74e4eee2a">USART_handle_ISR</a> (void)</td></tr>
<tr class="memdesc:a7db8915ef20a3db5378d21c74e4eee2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This Interrupt Service Routine is called when a new character is received by the USART. As quickly as possible, the AVR transfers the character to a circular buffer. The main loop code then retrieves data from this buffer. Observe that this mechanism allows data to be received at a high rate of speed independent of the main loop.  <a href="#a7db8915ef20a3db5378d21c74e4eee2a">More...</a><br /></td></tr>
<tr class="separator:a7db8915ef20a3db5378d21c74e4eee2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35231f8cdd9dc347e94ace43dc215432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a35231f8cdd9dc347e94ace43dc215432">USART_init_full</a> (unsigned long f_clk, unsigned long baud_rate, uint8_t data_bits, char parity)</td></tr>
<tr class="memdesc:a35231f8cdd9dc347e94ace43dc215432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the USART and configure the ISR to interrupt on receipt of a new char.  <a href="#a35231f8cdd9dc347e94ace43dc215432">More...</a><br /></td></tr>
<tr class="separator:a35231f8cdd9dc347e94ace43dc215432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd9b39c952df603cdd23a51ad64d599"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#acfd9b39c952df603cdd23a51ad64d599">USART_init</a> (unsigned long f_clk, unsigned long baud_rate)</td></tr>
<tr class="separator:acfd9b39c952df603cdd23a51ad64d599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41a67978a0d70ce6f26e57b9c2cfbac6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a41a67978a0d70ce6f26e57b9c2cfbac6">USART_set_terminator</a> (char terminator)</td></tr>
<tr class="memdesc:a41a67978a0d70ce6f26e57b9c2cfbac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">allows the user to set the string line terminator. This function is optional. The user may elect to use the default ASCII line feed terminator (0x0A)  <a href="#a41a67978a0d70ce6f26e57b9c2cfbac6">More...</a><br /></td></tr>
<tr class="separator:a41a67978a0d70ce6f26e57b9c2cfbac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5771fea1cfdc7d3a3ea1e975a312613e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a5771fea1cfdc7d3a3ea1e975a312613e">USART_gets</a> (char *P)</td></tr>
<tr class="separator:a5771fea1cfdc7d3a3ea1e975a312613e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6756d71f34dfc82b1ed40688db89ca98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a6756d71f34dfc82b1ed40688db89ca98">USART_puts</a> (char *D)</td></tr>
<tr class="separator:a6756d71f34dfc82b1ed40688db89ca98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a791b5b30ac96b0b9cd550bf4313932b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#a791b5b30ac96b0b9cd550bf4313932b2">USART_puts_ROM</a> (const char *D)</td></tr>
<tr class="separator:a791b5b30ac96b0b9cd550bf4313932b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae25cf058eb422b96f1d08099c8e6e7d3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_a_r_t_8h.html#ae25cf058eb422b96f1d08099c8e6e7d3">USART_is_string</a> (void)</td></tr>
<tr class="separator:ae25cf058eb422b96f1d08099c8e6e7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a5771fea1cfdc7d3a3ea1e975a312613e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USART_gets </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>P</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00131">131</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7db8915ef20a3db5378d21c74e4eee2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_handle_ISR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This Interrupt Service Routine is called when a new character is received by the USART. As quickly as possible, the AVR transfers the character to a circular buffer. The main loop code then retrieves data from this buffer. Observe that this mechanism allows data to be received at a high rate of speed independent of the main loop. </p>
<p>USART_handle_ISR  Ideally the entire ISR would be located in this file. Unfortunately there is a error "multiple definition of `vector_18". Apparently Arduino detects when an ISR is in the main sketch. If you place it somewhere else it is missed and replaced with the Arduino handler. This is the source of the multiple definitions error. See discussion at: </p><pre class="fragment">http://forum.arduino.cc/index.php?topic=42153.0
</pre><p>Note that the three variables used in this function are all global is scope. This was done so that this function could be included in the projects main page.</p>
<dl class="section note"><dt>Note</dt><dd>The vector name is not "USART_RXC" as indicated in the data sheet. Instead, the ATMega328p "iom328p.h" file identified the name as "USART_RX_vect".</dd>
<dd>
From the ATMEL data sheet "When interrupt driven data reception is used, the receive complete routine must read the received data from UDRn in order to clear the RXCn Flag, otherwise a new interrupt will occur once the interrupt routine terminates. </dd></dl>

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00045">45</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="acfd9b39c952df603cdd23a51ad64d599"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_init </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>f_clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>baud_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00112">112</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a35231f8cdd9dc347e94ace43dc215432"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_init_full </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>f_clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>baud_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>parity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the USART and configure the ISR to interrupt on receipt of a new char. </p>
<p>USART_init</p>
<p>The baud rate is calculated as: </p><pre class="fragment">             f_osc
 BAUD = -----------------
         16 * (UBRR + 1)
</pre><p>of if your prefer, </p><pre class="fragment">            f_osc
 UBBR = --------------  - 1
          16 * BAUD
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f_clk</td><td>master clock frequency, usually 16000000 MHz for the Arduino</td></tr>
    <tr><td class="paramname">baud_rate</td><td>desired speed of the USART e.g., 19200L</td></tr>
    <tr><td class="paramname">data_bits</td><td>currently accepts either 7 or 8 bits</td></tr>
    <tr><td class="paramname">parity</td><td>'N' = None, 'E' = Even, and 'O' = Odd</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00079">79</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae25cf058eb422b96f1d08099c8e6e7d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USART_is_string </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00153">153</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6756d71f34dfc82b1ed40688db89ca98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_puts </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>D</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00182">182</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a791b5b30ac96b0b9cd550bf4313932b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_puts_ROM </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>D</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00194">194</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a41a67978a0d70ce6f26e57b9c2cfbac6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_set_terminator </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>terminator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allows the user to set the string line terminator. This function is optional. The user may elect to use the default ASCII line feed terminator (0x0A) </p>
<p>USART_set_terminator</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">terminator</td><td>set the desired line terminator. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_u_s_a_r_t_8cpp_source.html#l00125">125</a> of file <a class="el" href="_u_s_a_r_t_8cpp_source.html">USART.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 2 2015 14:10:52 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
